{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />
  <title>WTE - Dashboard</title>
  <link rel="shortcut icon" href="{%static 'assets/img/favicon.png' %}" type="image/x-icon" />
  <link rel="stylesheet" href="{%static 'assets/plugins/bootstrap/css/bootstrap.min.css' %}" />
  <link rel="stylesheet" href="{%static 'assets/plugins/fontawesome/css/all.min.css' %}" />
  <link rel="stylesheet" href="{%static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;0,600;0,700;1,400&amp;display=swap" />
  <link rel="stylesheet" href="{%static 'assets/plugins/datatables/datatables.min.css' %}" />
  <link rel="stylesheet" href="{%static 'assets/css/style.css' %}" />
</head>

<body>
  <div class="main-wrapper">
    <div class="header">
      <div class="header-left">
        <a href="{% url 'dashboard_general' %}" class="logo">
          <img src="{%static 'assets/img/logo.png' %}" alt="Logo" />
        </a>
        <a href="{% url 'dashboard_general' %}" class="logo logo-small">
          <img src="{%static 'assets/img/favicon.png' %}" alt="Logo" width="30" height="30" />
        </a>
      </div>
      <a href="javascript:void(0);" id="toggle_btn">
        <i class="fas fa-align-left"></i>
      </a>
      <div class="top-nav-search">
        <form>
          <input type="text" class="form-control" placeholder="Search here" />
          <button class="btn" type="submit">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>
      <a class="mobile_btn" id="mobile_btn">
        <i class="fas fa-bars"></i>
      </a>
      <ul class="nav user-menu">
        <li class="nav-item dropdown noti-dropdown">
          <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
            <!-- {% if unread_notification_count > 0 %}
                  <i class="far fa-bell"></i> <span class="badge badge-pill">{{unread_notification_count}}</span>
                  {% endif %} -->
          </a>
          <div class="dropdown-menu notifications">
            <div class="topnav-dropdown-header">
              <span class="notification-title">Notifications</span>
              <a href="javascript:void(0)" class="clear-noti"> Clear All </a>
            </div>
            <div class="noti-content">
              <ul class="notification-list">
                <!-- {% for notification in unread_notification %}
                        <li class="notification-message">
                           <a href="#">
                              <div class="media">
                                 <span class="avatar avatar-sm">
                                    <img class="avatar-img rounded-circle" alt="User Image"
                                       src="assets/img/profiles/avatar-02.jpg">
                                 </span>
                                 <div class="media-body">
                                    <p class="noti-details"><span class="noti-title">{{ notification.user.username
                                          }}</span> {{ notification.message }} <span class="noti-title">your
                                          estimate</span></p>
                                    <p class="noti-time"><span class="notification-time">{{
                                          notification.created_at|timesince }} ago</span></p>
                                 </div>
                              </div>
                           </a>
                        </li>
                        {% endfor %} -->
              </ul>
            </div>
            <div class="topnav-dropdown-footer">
              <a href="#">View all Notifications</a>
            </div>
          </div>
        </li>
        <li class="nav-item dropdown has-arrow">
          <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
            <span class="user-img">
              <img class="rounded-circle" src="{%static 'assets/img/user.jpg' %}" width="31" alt="User Image" />
            </span>
          </a>
          <div class="dropdown-menu">
            <div class="user-header">
              <div class="avatar avatar-sm">
                <img src="{%static 'assets/img/user.jpg' %}" alt="User Image" class="avatar-img rounded-circle" />
              </div>
              <div class="user-text ml-3">
                <h6>{{ user.username }}</h6>
                <p class="text-muted mb-0">{{ user.highest_role }}</p>
              </div>
            </div>
            <a class="dropdown-item" href="">
              <i class="fas fa-user mr-2"></i>
              <span>
                Perfil
              </span>
            </a>
            <a class="dropdown-item" href="">
              <i class="fas fa-gear mr-2"></i>
              <span>
                Configurações
              </span>
            </a>
            <a class="dropdown-item" href="">
              <i class="fas fa-sun mr-2"></i>
              <span>
                Tema
              </span>
            </a>
            <a class="dropdown-item" href="{% url 'logout' %}">
              <i class="fas fa-sign-out-alt mr-2"></i>
              <span>
                Sair
              </span>
            </a>
          </div>
        </li>
      </ul>
    </div>

    <div class="sidebar" id="sidebar">
      <div class="sidebar-inner slimscroll">
        <div id="sidebar-menu" class="sidebar-menu">
          <ul>
            <li class="menu-title">
              <span>Principal</span>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-columns"></i>
                <span>Painéis</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li>
                  <a href="{% url 'dashboard_general' %}">
                    <i class="fas fa-chart-line"></i>
                    <span>Visão Geral</span>
                  </a>
                </li>
                <li>
                  <a href="{% url 'dashboard_booking' %}"><i class="fas fa-headset"></i>
                    <span>Atendimento</span>
                  </a>
                </li>
                <li>
                  <a href="{% url 'dashboard_general' %}">
                    <i class="fas fa-wine-glass-alt"></i>
                    <span>Experiências</span>
                  </a>
                </li>
                <li>
                  <a href="{% url 'dashboard_general' %}">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Financeiro</span>
                  </a>
                </li>
              </ul>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-user"></i>
                <span>Gerenciar Acesso</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li><a href="{% url 'dashboard_general' %}"><span>Usuários</span></a></li>
                <li><a href="{% url 'dashboard_general' %}"><span>Perfis de Acesso</span></a></li>
              </ul>
            </li>

            <li class="menu-title">
              <span>Atendimento</span>
            </li>
            <li class="menu">
              <a href="">
                <i class="fas fa-columns"></i>
                <span>Agenda</span>
              </a>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-headset"></i>
                <span>Reservas</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li>
                  <a href="{% url 'add_booking' %}">
                    <span>Nova Reserva</span>
                  </a>
                </li>
                <li>
                  <a href="{% url 'list_booking' %}">
                    <span>Listar Reservas</span>
                  </a>
                </li>
              </ul>
            </li>

            <li class="menu-title">
              <span>Financeiro</span>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-receipt"></i>
                <span>Faturas (Cliente)</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li>
                  <a href="{% url 'list_customer_invoice' %}">
                    <span>Faturas Emitidas</span>
                  </a>
                </li>
              </ul>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-file-invoice-dollar"></i>
                <span>Faturas (Parceiro)</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li>
                  <a href="{% url 'list_partner_invoice' %}">
                    <span>Faturas Emitidas</span>
                  </a>
                </li>
              </ul>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-wallet"></i>
                <span>Despesas</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li><a href="{% url 'dashboard_general' %}"><span>Nova Despesa</span></a></li>
                <li><a href="{% url 'dashboard_general' %}"><span>Histórico de Despesas</span></a></li>
              </ul>
            </li>


            <li class="menu-title">
              <span>Serviços</span>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-wine-glass-alt"></i>
                <span>Experiências</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li><a href="{% url 'add_experience' %}"><span>Nova Experiência</span></a></li>
                <li><a href="{% url 'list_experience' %}"><span>Listar Experiências</span></a></li>
              </ul>
            </li>
            <li class="submenu">
              <a href="#">
                <i class="fas fa-handshake"></i>
                <span>Parceiros</span>
                <span class="menu-arrow"></span>
              </a>
              <ul>
                <li><a href="{% url 'add_partner' %}"><span>Novo Parceiro</span></a></li>
                <li><a href="{% url 'list_partner' %}"><span>Listar Parceiros</span></a></li>
              </ul>
            </li>

          </ul>
        </div>
      </div>
    </div>

    {% block body %} {% endblock %}
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Aplica o estado salvo
      if (localStorage.getItem("sidebar") === "minimized") {
        document.body.classList.add("mini-sidebar");
        $(".subdrop + ul").slideUp();
        $("#sidebar-menu > ul > li.menu-title").hide();
      }

      const toggleBtn = document.getElementById("toggle_btn");
      if (toggleBtn) {
        toggleBtn.addEventListener("click", function () {
          const body = document.body;
          body.classList.toggle("mini-sidebar");

          // Salva no localStorage
          if (body.classList.contains("mini-sidebar")) {
            localStorage.setItem("sidebar", "minimized");
            $(".subdrop + ul").slideUp();
            $("#sidebar-menu > ul > li.menu-title").hide();
          } else {
            localStorage.removeItem("sidebar");
            $(".subdrop + ul").slideDown();
            $("#sidebar-menu > ul > li.menu-title").show();
          }
        });
      }
    });
  </script>

</body>

</html>